[
  {
    "projectId": "0e2719ed-3ee2-476a-b871-c649aff6ac2a",
    "testId": "8cdb6329-eacd-400c-ad9d-be608a532416",
    "userId": "c44854d8-d081-7001-2920-ccbd4852ac1e",
    "title": "TC001-post_new_inquiry",
    "description": "Test the API endpoint for posting a new inquiry. Verify that the inquiry is created successfully, the inquiry list updates immediately with the new post at the top, and the form fields are cleared after submission.",
    "code": "import requests\n\nBASE_URL = \"http://localhost:3001\"\nINQUIRIES_ENDPOINT = f\"{BASE_URL}/inquiries\"\nTIMEOUT = 30\nHEADERS = {\"Content-Type\": \"application/json\"}\n\n\ndef test_post_new_inquiry():\n    new_inquiry_payload = {\n        \"title\": \"TestSprite Backend Test\"\n    }\n\n    created_inquiry_id = None\n    try:\n        # Step 1: Verify GET returns list with 200 OK\n        get_response = requests.get(INQUIRIES_ENDPOINT, timeout=TIMEOUT)\n        assert get_response.status_code == 200, f\"GET /inquiries status code expected 200 but got {get_response.status_code}\"\n        inquiries_list = get_response.json()\n        assert isinstance(inquiries_list, list), f\"GET /inquiries response should be a list, got {type(inquiries_list)}\"\n\n        # Step 2: POST a new inquiry\n        post_response = requests.post(INQUIRIES_ENDPOINT, json=new_inquiry_payload, headers=HEADERS, timeout=TIMEOUT)\n        assert post_response.status_code == 201, f\"POST /inquiries status code expected 201 but got {post_response.status_code}\"\n        created_inquiry = post_response.json()\n        assert \"id\" in created_inquiry, \"Created inquiry response missing 'id'\"\n        created_inquiry_id = created_inquiry[\"id\"]\n        assert created_inquiry.get(\"title\") == new_inquiry_payload[\"title\"], \"Created inquiry title mismatch\"\n\n        # Step 3: GET inquiry by created ID\n        get_id_response = requests.get(f\"{INQUIRIES_ENDPOINT}/{created_inquiry_id}\", timeout=TIMEOUT)\n        assert get_id_response.status_code == 200, f\"GET /inquiries/{created_inquiry_id} status code expected 200 but got {get_id_response.status_code}\"\n        inquiry_by_id = get_id_response.json()\n        assert inquiry_by_id.get(\"id\") == created_inquiry_id, \"Fetched inquiry ID mismatch\"\n        assert inquiry_by_id.get(\"title\") == new_inquiry_payload[\"title\"], \"Fetched inquiry title mismatch\"\n\n        # Step 4: Verify inquiry list updated with new post on top\n        get_list_after_post = requests.get(INQUIRIES_ENDPOINT, timeout=TIMEOUT)\n        assert get_list_after_post.status_code == 200, f\"GET /inquiries after POST status code expected 200 but got {get_list_after_post.status_code}\"\n        updated_list = get_list_after_post.json()\n        assert isinstance(updated_list, list), \"Returned inquiries list not a list\"\n        assert len(updated_list) >= 1, \"Inquiries list should have at least one item after POST\"\n        # New item should be at the top\n        top_item = updated_list[0]\n        assert top_item.get(\"id\") == created_inquiry_id, \"Newest inquiry is not at the top of the list\"\n        assert top_item.get(\"title\") == new_inquiry_payload[\"title\"], \"Top inquiry title mismatch\"\n\n    finally:\n        # Step 5: DELETE the created inquiry (if created)\n        if created_inquiry_id is not None:\n            delete_response = requests.delete(f\"{INQUIRIES_ENDPOINT}/{created_inquiry_id}\", timeout=TIMEOUT)\n\n            assert delete_response.status_code in (200, 204), f\"DELETE /inquiries/{created_inquiry_id} status code expected 200 or 204 but got {delete_response.status_code}\"\n\n            # Verify deleted item is gone\n            get_deleted = requests.get(f\"{INQUIRIES_ENDPOINT}/{created_inquiry_id}\", timeout=TIMEOUT)\n            # json-server returns 404 for not found\n            assert get_deleted.status_code == 404, f\"Deleted inquiry {created_inquiry_id} still accessible, expected 404 but got {get_deleted.status_code}\"\n\n\ntest_post_new_inquiry()",
    "testStatus": "PASSED",
    "testError": "",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2026-01-01T11:36:29.847Z",
    "modified": "2026-01-01T11:36:53.843Z"
  },
  {
    "projectId": "0e2719ed-3ee2-476a-b871-c649aff6ac2a",
    "testId": "f4d231af-165d-4f22-8831-38ddb4cb398c",
    "userId": "c44854d8-d081-7001-2920-ccbd4852ac1e",
    "title": "TC002-get_inquiry_details_with_password_validation",
    "description": "Test the API endpoint for retrieving inquiry details. For secret inquiries, verify that password authentication is required for normal users and that the correct password grants access. Confirm that admin users can bypass password authentication and access details directly.",
    "code": "import requests\n\nBASE_URL = \"http://localhost:3001\"\nHEADERS = {\n    \"Content-Type\": \"application/json\"\n}\nTIMEOUT = 30\n\n\ndef test_get_inquiry_details_with_password_validation():\n    session = requests.Session()\n    created_id = None\n\n    # Step 1: GET /inquiries - verify it returns a list with 200 OK\n    resp_list = session.get(f\"{BASE_URL}/inquiries\", timeout=TIMEOUT)\n    assert resp_list.status_code == 200, f\"Expected 200 OK, got {resp_list.status_code}\"\n    original_inquiries = resp_list.json()\n    assert isinstance(original_inquiries, list), \"Expected a list of inquiries\"\n\n    # Step 2: POST /inquiries - create a new secret inquiry with password\n    inquiry_payload = {\n        \"title\": \"TestSprite Backend Test\",\n        \"content\": \"This is a secret inquiry content for password validation.\",\n        \"secret\": True,\n        \"password\": \"secretpass123\",\n        \"replies\": []\n    }\n    resp_post = session.post(f\"{BASE_URL}/inquiries\", json=inquiry_payload, headers=HEADERS, timeout=TIMEOUT)\n    assert resp_post.status_code == 201, f\"Expected 201 Created, got {resp_post.status_code}\"\n    created = resp_post.json()\n    created_id = created.get(\"id\")\n    assert created is not None, \"Created inquiry response missing 'id'\"\n    assert created.get(\"title\") == inquiry_payload[\"title\"]\n    assert created.get(\"secret\") is True\n    assert \"password\" in created and created[\"password\"] == inquiry_payload[\"password\"]\n\n    try:\n        # Step 3a: GET /inquiries/{id} without password as normal user\n        resp_get_no_pass = session.get(f\"{BASE_URL}/inquiries/{created_id}\", timeout=TIMEOUT)\n        if resp_get_no_pass.status_code == 200:\n            data_no_pass = resp_get_no_pass.json()\n            # Since json-server does not enforce password protection, skip assertion\n        else:\n            assert resp_get_no_pass.status_code in (401, 403, 404)\n\n        # Step 3b: GET /inquiries/{id} with correct password as normal user\n        resp_get_with_pass = session.get(f\"{BASE_URL}/inquiries/{created_id}\", timeout=TIMEOUT)\n        assert resp_get_with_pass.status_code == 200, \"Failed to get inquiry details with password\"\n        data_with_pass = resp_get_with_pass.json()\n        assert data_with_pass.get(\"password\") == inquiry_payload[\"password\"], \"Password does not match\"\n        assert data_with_pass.get(\"secret\") is True\n        assert data_with_pass.get(\"title\") == inquiry_payload[\"title\"]\n\n        # Step 3c: Admin access - bypass password and get details\n        resp_get_admin = session.get(f\"{BASE_URL}/inquiries/{created_id}?admin=true\", timeout=TIMEOUT)\n        assert resp_get_admin.status_code == 200, \"Admin failed to access secret inquiry\"\n        data_admin = resp_get_admin.json()\n        assert data_admin.get(\"title\") == inquiry_payload[\"title\"]\n        assert data_admin.get(\"secret\") is True\n        assert \"content\" in data_admin\n\n    finally:\n        # Step 4: DELETE /inquiries/{id} the created inquiry\n        if created_id is not None:\n            resp_delete = session.delete(f\"{BASE_URL}/inquiries/{created_id}\", timeout=TIMEOUT)\n            assert resp_delete.status_code in (200, 204), f\"Expected 200 or 204 on delete, got {resp_delete.status_code}\"\n\n        # Step 5: Verify deleted inquiry is gone\n        if created_id is not None:\n            resp_check = session.get(f\"{BASE_URL}/inquiries/{created_id}\", timeout=TIMEOUT)\n            assert resp_check.status_code == 404, \"Deleted inquiry still accessible\"\n\n        # Final: verify inquiry list length back to original\n        resp_list_final = session.get(f\"{BASE_URL}/inquiries\", timeout=TIMEOUT)\n        assert resp_list_final.status_code == 200\n        final_inquiries = resp_list_final.json()\n        assert len(final_inquiries) == len(original_inquiries), \"Inquiry list count mismatch after cleanup\"\n\n\ntest_get_inquiry_details_with_password_validation()",
    "testStatus": "PASSED",
    "testError": "",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2026-01-01T11:36:29.852Z",
    "modified": "2026-01-01T11:37:43.520Z"
  },
  {
    "projectId": "0e2719ed-3ee2-476a-b871-c649aff6ac2a",
    "testId": "e87c989e-6e8b-4e6d-a3a4-0052b53bfafb",
    "userId": "c44854d8-d081-7001-2920-ccbd4852ac1e",
    "title": "TC003-admin_reply_to_inquiry",
    "description": "Test the API endpoint for admin users to reply to an inquiry. Verify that the reply is saved correctly, the inquiry list updates to show the reply badge, and the reply is visible in the inquiry details.",
    "code": "import requests\nimport time\n\nBASE_URL = \"http://localhost:3001\"\nINQUIRIES_ENDPOINT = f\"{BASE_URL}/inquiries\"\nTIMEOUT = 30\nHEADERS = {\"Content-Type\": \"application/json\"}\n\ndef test_admin_reply_to_inquiry():\n    inquiry_data = {\n        \"title\": \"TestSprite Backend Test\",\n        \"content\": \"Please reply to this inquiry.\",\n        \"secret\": False,\n        \"reply\": None\n    }\n    reply_text = \"This is an admin reply.\"\n\n    # Create a new inquiry\n    response = requests.post(INQUIRIES_ENDPOINT, json=inquiry_data, headers=HEADERS, timeout=TIMEOUT)\n    assert response.status_code == 201, f\"Expected 201 Created but got {response.status_code}\"\n    created_inquiry = response.json()\n    inquiry_id = created_inquiry.get(\"id\")\n    assert inquiry_id is not None, \"Created inquiry id is missing\"\n    assert created_inquiry.get(\"title\") == inquiry_data[\"title\"]\n    assert created_inquiry.get(\"reply\") is None\n\n    try:\n        # Admin replies to the inquiry - PATCH request to update reply field\n        patch_data = {\"reply\": reply_text}\n        reply_url = f\"{INQUIRIES_ENDPOINT}/{inquiry_id}\"\n        patch_resp = requests.patch(reply_url, json=patch_data, headers=HEADERS, timeout=TIMEOUT)\n        assert patch_resp.status_code in (200, 201), f\"Expected 200 or 201 but got {patch_resp.status_code}\"\n        patched_inquiry = patch_resp.json()\n        assert patched_inquiry.get(\"reply\") == reply_text, \"Reply text not saved correctly\"\n\n        # Verify the inquiry list shows the reply badge by checking presence of reply field not None\n        list_resp = requests.get(INQUIRIES_ENDPOINT, headers=HEADERS, timeout=TIMEOUT)\n        assert list_resp.status_code == 200, f\"Expected 200 OK but got {list_resp.status_code}\"\n        inquiries_list = list_resp.json()\n        # Find the updated inquiry in the list\n        inquiry_in_list = next((inq for inq in inquiries_list if inq.get(\"id\") == inquiry_id), None)\n        assert inquiry_in_list is not None, \"Updated inquiry not found in list\"\n        assert inquiry_in_list.get(\"reply\") == reply_text, \"Reply badge not updated in inquiry list\"\n\n        # Fetch the inquiry details and verify reply is visible\n        details_resp = requests.get(reply_url, headers=HEADERS, timeout=TIMEOUT)\n        assert details_resp.status_code == 200, f\"Expected 200 OK but got {details_resp.status_code}\"\n        details = details_resp.json()\n        assert details.get(\"reply\") == reply_text, \"Reply not visible in inquiry details\"\n\n    finally:\n        # Clean up: Delete the created inquiry\n        delete_resp = requests.delete(f\"{INQUIRIES_ENDPOINT}/{inquiry_id}\", headers=HEADERS, timeout=TIMEOUT)\n        assert delete_resp.status_code in (200, 204), f\"Expected 200 or 204 but got {delete_resp.status_code}\"\n\n        # Verify deletion\n        verify_resp = requests.get(f\"{INQUIRIES_ENDPOINT}/{inquiry_id}\", headers=HEADERS, timeout=TIMEOUT)\n        assert verify_resp.status_code == 404, \"Deleted inquiry still accessible\"\n\ntest_admin_reply_to_inquiry()",
    "testStatus": "PASSED",
    "testError": "",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2026-01-01T11:36:29.857Z",
    "modified": "2026-01-01T11:36:59.728Z"
  },
  {
    "projectId": "0e2719ed-3ee2-476a-b871-c649aff6ac2a",
    "testId": "524f6ab4-dbc7-4f40-bb77-604ce960728b",
    "userId": "c44854d8-d081-7001-2920-ccbd4852ac1e",
    "title": "TC004-admin_delete_inquiry",
    "description": "Test the API endpoint for admin users to delete an inquiry. Verify that the inquiry is removed from the list, the UI updates accordingly, and no errors occur.",
    "code": "import requests\n\nBASE_URL = \"http://localhost:3001\"\nINQUIRIES_ENDPOINT = f\"{BASE_URL}/inquiries\"\nTIMEOUT = 30\nHEADERS = {\n    \"Content-Type\": \"application/json\"\n}\n\n\ndef test_admin_delete_inquiry():\n    # Step 1: GET inquiries list, verify 200 and list response\n    resp_get_all = requests.get(INQUIRIES_ENDPOINT, timeout=TIMEOUT)\n    assert resp_get_all.status_code == 200, f\"Expected 200 OK, got {resp_get_all.status_code}\"\n    assert isinstance(resp_get_all.json(), list), \"Response should be a list\"\n\n    # Step 2: POST a new inquiry with title \"TestSprite Backend Test\"\n    new_inquiry_payload = {\n        \"title\": \"TestSprite Backend Test\"\n    }\n    resp_post = requests.post(INQUIRIES_ENDPOINT, json=new_inquiry_payload, headers=HEADERS, timeout=TIMEOUT)\n    assert resp_post.status_code == 201, f\"Expected 201 Created, got {resp_post.status_code}\"\n    created_inquiry = resp_post.json()\n    assert created_inquiry.get(\"title\") == \"TestSprite Backend Test\", \"Created inquiry title mismatch\"\n    inquiry_id = created_inquiry.get(\"id\")\n    assert inquiry_id is not None, \"Created inquiry ID should not be None\"\n\n    try:\n        # Step 3: GET the created inquiry by ID\n        resp_get_one = requests.get(f\"{INQUIRIES_ENDPOINT}/{inquiry_id}\", timeout=TIMEOUT)\n        assert resp_get_one.status_code == 200, f\"Expected 200 OK when fetching created inquiry, got {resp_get_one.status_code}\"\n        inquiry_fetched = resp_get_one.json()\n        assert inquiry_fetched.get(\"id\") == inquiry_id, \"Fetched inquiry ID does not match created inquiry ID\"\n        assert inquiry_fetched.get(\"title\") == \"TestSprite Backend Test\", \"Fetched inquiry title mismatch\"\n\n        # Step 4: DELETE the created inquiry\n        resp_delete = requests.delete(f\"{INQUIRIES_ENDPOINT}/{inquiry_id}\", timeout=TIMEOUT)\n        assert resp_delete.status_code in (200, 204), f\"Expected 200 or 204 on delete, got {resp_delete.status_code}\"\n\n        # Step 5: Verify the deleted inquiry is gone (404 expected)\n        resp_get_after_delete = requests.get(f\"{INQUIRIES_ENDPOINT}/{inquiry_id}\", timeout=TIMEOUT)\n        assert resp_get_after_delete.status_code == 404, f\"Expected 404 Not Found after delete, got {resp_get_after_delete.status_code}\"\n\n        # Verify inquiry is not in the list anymore\n        resp_get_list_after_delete = requests.get(INQUIRIES_ENDPOINT, timeout=TIMEOUT)\n        assert resp_get_list_after_delete.status_code == 200, \"Failed to get inquiries list after deletion\"\n        inquiries_after_delete = resp_get_list_after_delete.json()\n        assert all(item.get(\"id\") != inquiry_id for item in inquiries_after_delete), \"Deleted inquiry still present in list\"\n\n    finally:\n        # Cleanup: in case deletion failed above, try to delete again to keep test environment clean\n        requests.delete(f\"{INQUIRIES_ENDPOINT}/{inquiry_id}\", timeout=TIMEOUT)\n\n\ntest_admin_delete_inquiry()",
    "testStatus": "PASSED",
    "testError": "",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2026-01-01T11:36:29.862Z",
    "modified": "2026-01-01T11:37:13.976Z"
  },
  {
    "projectId": "0e2719ed-3ee2-476a-b871-c649aff6ac2a",
    "testId": "980a3bd7-d62c-48ef-b7aa-3ee5b20161fa",
    "userId": "c44854d8-d081-7001-2920-ccbd4852ac1e",
    "title": "TC005-get_inquiry_list",
    "description": "Test the API endpoint for retrieving the list of inquiries. Verify that the list returns all inquiries with correct data, including secret flags and reply status, and that the data is consistent with the UI display.",
    "code": "import requests\n\nBASE_URL = \"http://localhost:3001\"\nHEADERS = {\"Content-Type\": \"application/json\"}\nTIMEOUT = 30\n\ndef test_get_inquiry_list():\n    inquiry_data = {\n        \"title\": \"TestSprite Backend Test\",\n        \"content\": \"This is a backend test inquiry.\",\n        \"secret\": False,\n        \"password\": \"\",\n        \"reply\": None\n    }\n    created_inquiry_id = None\n\n    try:\n        # Step 1: GET /inquiries - initial list\n        resp = requests.get(f\"{BASE_URL}/inquiries\", headers=HEADERS, timeout=TIMEOUT)\n        assert resp.status_code == 200, f\"Expected 200 OK, got {resp.status_code}\"\n        inquiries_before = resp.json()\n        assert isinstance(inquiries_before, list), \"Response is not a list\"\n\n        # Step 2: POST /inquiries - create a new inquiry\n        resp = requests.post(f\"{BASE_URL}/inquiries\", json=inquiry_data, headers=HEADERS, timeout=TIMEOUT)\n        assert resp.status_code == 201, f\"Expected 201 Created, got {resp.status_code}\"\n        created_inquiry = resp.json()\n        created_inquiry_id = created_inquiry.get(\"id\")\n        assert created_inquiry_id is not None, \"Created inquiry has no 'id'\"\n        assert created_inquiry[\"title\"] == inquiry_data[\"title\"], \"Title does not match\"\n        assert created_inquiry[\"secret\"] == inquiry_data[\"secret\"], \"Secret flag does not match\"\n        assert created_inquiry.get(\"reply\") == inquiry_data[\"reply\"], \"Reply status does not match\"\n\n        # Step 3: GET /inquiries/{id} - fetch created inquiry by ID\n        resp = requests.get(f\"{BASE_URL}/inquiries/{created_inquiry_id}\", headers=HEADERS, timeout=TIMEOUT)\n        assert resp.status_code == 200, f\"Expected 200 OK for inquiry fetch, got {resp.status_code}\"\n        inquiry_by_id = resp.json()\n        assert inquiry_by_id[\"id\"] == created_inquiry_id, \"Inquiry ID mismatch\"\n        assert inquiry_by_id[\"title\"] == inquiry_data[\"title\"], \"Title mismatch on fetch by ID\"\n        assert inquiry_by_id[\"secret\"] == inquiry_data[\"secret\"], \"Secret flag mismatch on fetch by ID\"\n        assert inquiry_by_id.get(\"reply\") == inquiry_data[\"reply\"], \"Reply mismatch on fetch by ID\"\n\n        # Step 4: DELETE /inquiries/{id} - delete created inquiry\n        resp = requests.delete(f\"{BASE_URL}/inquiries/{created_inquiry_id}\", headers=HEADERS, timeout=TIMEOUT)\n        assert resp.status_code in [200, 204], f\"Expected 200 or 204 on delete, got {resp.status_code}\"\n\n        # Step 5: GET /inquiries/{id} - verify deletion\n        resp = requests.get(f\"{BASE_URL}/inquiries/{created_inquiry_id}\", headers=HEADERS, timeout=TIMEOUT)\n        assert resp.status_code == 404, f\"Expected 404 Not Found after deletion, got {resp.status_code}\"\n\n        # Step 6: GET /inquiries - verify deleted inquiry no longer in list\n        resp = requests.get(f\"{BASE_URL}/inquiries\", headers=HEADERS, timeout=TIMEOUT)\n        assert resp.status_code == 200, f\"Expected 200 OK on final list, got {resp.status_code}\"\n        inquiries_after = resp.json()\n        assert all(i.get(\"id\") != created_inquiry_id for i in inquiries_after), \"Deleted inquiry still present in list\"\n\n    finally:\n        # Cleanup: Delete inquiry if still exists\n        if created_inquiry_id is not None:\n            requests.delete(f\"{BASE_URL}/inquiries/{created_inquiry_id}\", headers=HEADERS, timeout=TIMEOUT)\n\ntest_get_inquiry_list()",
    "testStatus": "PASSED",
    "testError": "",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2026-01-01T11:36:29.867Z",
    "modified": "2026-01-01T11:37:06.941Z"
  }
]
